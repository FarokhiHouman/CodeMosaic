<UserControl x:Class="CodeMosaic.CombineView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:CodeMosaic"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
	<UserControl.DataContext>
		<local:CombineViewModel />
	</UserControl.DataContext>
	<UserControl.Resources>
		<!-- ItemTemplate for ListBox with CheckBox for multi-select -->
		<DataTemplate x:Key="ExtensionTemplate">
			<CheckBox Content="{Binding Extension}" IsChecked="{Binding IsSelected, Mode=TwoWay}" />
		</DataTemplate>
	</UserControl.Resources>
	<Grid Margin="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Source Folder Path Selection -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
			<TextBlock Text="Source Folder:" Width="100" VerticalAlignment="Center" />
			<TextBox Name="FolderPathTextBox" Text="{Binding FolderPath}" Width="400" Margin="5,0" />
			<Button Content="Browse" Width="80" Command="{Binding BrowseFolderCommand}" />
		</StackPanel>

		<!-- Output Folder Path Selection -->
		<StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
			<TextBlock Text="Output Folder:" Width="100" VerticalAlignment="Center" />
			<TextBox Name="OutputFolderTextBox" Text="{Binding OutputFolder}" Width="400" Margin="5,0" />
			<Button Content="Browse" Width="80" Command="{Binding BrowseOutputFolderCommand}" />
		</StackPanel>

		<!-- Output File Name -->
		<StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,10">
			<TextBlock Text="Output File:" Width="100" VerticalAlignment="Center" />
			<TextBox Name="OutputFileTextBox" Text="{Binding OutputFileName}" Width="400" Margin="5,0" />
		</StackPanel>

		<!-- File Extensions Selection - Now Multi-Select with ListBox -->
		<StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,0,0,10">
			<TextBlock Text="Extensions:" Width="100" VerticalAlignment="Center" />
			<ListBox Name="ExtensionsListBox" ItemsSource="{Binding Extensions}" ItemTemplate="{StaticResource ExtensionTemplate}" Width="200" Height="80" Margin="5,0" ScrollViewer.VerticalScrollBarVisibility="Auto" />
			<TextBox Name="NewExtensionTextBox" Text="{Binding NewExtension}" Width="100" Margin="5,0" ToolTip="Add new extension (e.g., .xaml)" />
			<Button Content="Add" Width="60" Command="{Binding AddExtensionCommand}" />
		</StackPanel>

		<!-- Split Mode Selection -->
		<StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,0,0,10">
			<TextBlock Text="Split Mode:" Width="100" VerticalAlignment="Center" />
			<ComboBox Name="SplitModeComboBox" SelectedItem="{Binding SplitMode}" Width="150" Margin="5,0">
				<ComboBoxItem Content="None" />
				<ComboBoxItem Content="By Size" />
				<ComboBoxItem Content="By Characters" />
			</ComboBox>
		</StackPanel>

		<!-- Include Metadata Checkbox -->
		<CheckBox Grid.Row="5" Name="IncludeMetadataCheckBox" IsChecked="{Binding IncludeMetadata}" Content="Include Metadata" Margin="0,0,0,10" />

		<!-- Dynamic Max Value Slider (Visible based on Split Mode) -->
		<StackPanel Grid.Row="6" Name="MaxValueStackPanel" Orientation="Horizontal" Margin="0,0,0,10" Visibility="{Binding MaxVisible}">
			<TextBlock Name="MaxValueLabel" Text="{Binding MaxLabel}" Width="100" VerticalAlignment="Center" />
			<Slider Name="MaxValueSlider" Value="{Binding MaxValue}" Width="200" Margin="5,0" />
			<TextBlock Name="MaxValueLabelText" Width="100" Text="{Binding MaxValue}" VerticalAlignment="Center" Margin="5,0" />
		</StackPanel>

		<!-- Start Combine Button -->
		<Button Grid.Row="7" Name="StartCombineButton" Content="Start Combine" Width="150" Height="35" Command="{Binding StartCombineCommand}" HorizontalAlignment="Right" />
	</Grid>
</UserControl>